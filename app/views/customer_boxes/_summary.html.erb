<!-- filepath: /Users/joshua/Sites/switch-rails/app/views/customer_boxes/_summary.html.erb -->
<h5>Items To Add To Your Box</h5>
<table class="table box-summary-table" style="width: 100%;">
  <thead>
    <tr>
      <th style="width: 50%;">Item</th>
      <th style="width: 16.6%;">Quantity</th>
      <th style="width: 16.6%;">Price</th>
      <th style="width: 16.6%;">Subtotal</th>
    </tr>
  </thead>
  <tbody class="mb-4">
    <% order.orderables.each do |orderable| %>
      <tr id="variation_<%= orderable.variation.id %>">
        <td><%= orderable.variation.name %></td>
        <td class="center"><%= orderable.quantity %></td>
        <td class="center"><%= display_price(orderable.variation.amount) %></td>
        <td class="center"><%= display_price(orderable.quantity * orderable.variation.amount) %></td>
        <td>
          <span class="close">
            <%= form_with(url: remove_orderable_path(orderable), method: :post) do |f| %>
              <%= f.submit "remove" %>
            <% end %>
          </span>          
        </td>
      </tr>
    <% end %>
  </tbody>
  <tfoot class="mt-4">
    <tr>
      <th colspan="3" class="text-right">Total</th>
      <th class="center"><%= display_price(order.orderables.sum { |o| o.quantity * o.variation.amount }) %></th>
    </tr>
  </tfoot>
</table>